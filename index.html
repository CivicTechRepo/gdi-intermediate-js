<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>JavaScript 201: Intermediate JavaScript</title>

		<meta name="description" content="Girl Develop It framework for easily creating beautiful presentations using HTML in GDI theme. Forked from Hakim El Hattab's reveal.js">
		<meta name="author" content="Girl Develop It">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<!-- For syntax highlighting -->
		<!-- light editor --><link rel="stylesheet" href="lib/css/light.css">
		<!-- dark editor <link rel="stylesheet" href="lib/css/dark.css">-->
		<!-- <link rel="stylesheet" href="lib/css/zenburn.css"> -->

		<link rel="stylesheet" href="plugin/accessibility-helper/css/accessibility-helper.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!-- If use the PDF print sheet so students can print slides-->

		<link rel="stylesheet" href="css/print/pdf.css" type="text/css" media="print">
		<link rel="icon" type="image/x-icon" href="favicon.ico" />
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<!-- Opening -->
				<section>
					<img src="img/circle-gdi-logo.png" alt="GDI Logo" class="noborder"/>
					<h1>JavaScript 201</h1>
					<h2>Intermediate JavaScript</h2>
					<p>
						<small>View the slides at <a href ="https://github.com/gdila/intermediate-js">gdila.org/js201</a>.</small>
					</p>
				</section>

				<!-- Wifi and links -->
				<section>
					<h3>JavaScript 201</h3>
					<p>Wifi network: Opodz Members</p>
					<p>Wifi password: opodz888</p>
					<p>&nbsp;</p>
					<h3>Class Slides</h3>
					<p><a href="http://gdila.org/js201">gdila.org/js201</a></p>
				</section>

				<!-- Sponsors -->
				<section>
					<h1>Thank You</h1>
					<p><img src="img/opodz-logo.jpg" height="210" width="585" alt=""></p>
				</section>

				<!-- GDI Rules -->
				<section>
					<h3>Welcome!</h3>
					<p>Girl Develop It is here to provide affordable and accessible programs to learn software through mentorship and hands-on instruction.</p>
					<p class="green">Some "rules"</p>
					<ul>
						<li>Every question is important.</li>
						<li>Help each other.</li>
						<li>Have fun.</li>
						<li>Learn and return.</li>
					</ul>
				</section>

				<!-- Student introductions -->
				<section>
					<h3>Tell us about yourself</h3>
					<ul>
						<li>What's your name?</li>
						<li>What do you hope to get out of the class?</li>
						<li>Where would you most like to go on a vacation?</li>
					</ul>
				</section>

				<!-- TA introductions -->
				<section>
					<h3>Ok, TA's your turn</h3>
					<ul>
						<li>What's your name?</li>
						<li>Why do you like JavaScript?</li>
						<li>Where would you most like to go on a vacation?</li>
					</ul>
				</section>

				<!-- Teacher introduction -->
				<section>
					<h2>About Me</h2>
					<ul>
						<li>What's my name?</li>
						<li>What's my favorite language?</li>
						<li>What do I do?</li>
						<li>Where would I most like to go on a vacation?</li>
					</ul>
				</section>

				<!-- Slides link -->
				<section>
					<h3>Follow along!</h3>
					<p>Access the slides and follow along here:</p>
					<p><a href="http://gdila.org/js201">gdila.org/js201</a></p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Let's get set up to write and test a little JavaScript. Make a folder called <code>gdi</code>. Inside, make an HTML page called <code>index.html</code> and a JavaScript file called <code>mycode.js</code>. Then set up your <code>index.html</code> file like this:</p>
<pre><code class="javascript">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta chartset="UTF-8"/&gt;
	&lt;title&gt;Test Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;p&gt;This is my awesome JavaScript code.&lt;/p&gt;

	&lt;script src="mycode.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
				</section>

				<!-- Variables & Scope -->
				<section>
					<h3>Variables</h3>
					<p>A variable is a place to store values</p>
					<p>Review:</p>
					<ul>
						<li>Declaring variables</li>
						<li>Initializing variables</li>
						<li>What variables can contain</li>
						<li>Naming rules for variables</li>
					</ul>
				</section>

				<section>
					<h3>Scope</h3>
					<p>The scope of a variable is how long the computer will remember it.</p>
				</section>

				<section>
					<h3>Local Scope</h3>
<pre><code class ="javascript">var func = function() {
	var local = true;
	console.log(local);
};

func();

console.log(local);</code></pre>
				</section>

				<section>
					<h3>Global Scope</h3>
<pre><code class ="javascript">var global = "I'm available everywhere!";

var func = function() {
	var local = "I'm available inside this function.";
	console.log(local, global);
};

func();

console.log(global);</code></pre>
				</section>

				<section>
					<h3>Sneaky global scope</h3>
					<p>Be careful to properly declare and initialize your variables to avoid unexpected global scope.</p>
<pre><code class="javascript">var global = "I'm available everywhere.";

var func = function() {
	local = "I'm available everywhere, too!";
};

func();

console.log(local);</code></pre>
				</section>

				<section>
					<h3>Precedence</h3>
<pre><code class="javascript">var g = "global";

function go() {
	var l = "local";
	var g = "in here!";
	console.log(g + " inside go()");
}

go();
alert(g + " outside go()");</code></pre>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions about variables, scope, or precedence?</p>
				</section>

				<!-- Arrays -->
				<section>
					<h3>Arrays</h3>
<pre><code class="javascript">var coolClasses = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];</code></pre>
					<ul>
						<li class="fragment">How long is the array?</li>
						<li class="fragment">What is the index of <strong>JS 101</strong>?</code></li>
						<li class="fragment">What is at the 0th index?</li>
						<li class="fragment">How do we find the length of an array?</li>
						<li class="fragment">When would we use an array?</li>
					</ul>
				</section>

				<section>
					<h3>Assignment and expanding arrays</h3>
<pre><code class="javascript">var classes = [];

classes[0] = 'HTML 101';
classes[1] = 'HTML 201';

classes.push('JS 101');
</code></pre>
				</section>

				<section>
					<h3>Accessing items</h3>
<pre><code class="javascript">var classes = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];

var firstClass = classes[0];
var lastClass = classes[3];</code></pre>
				</section>

				<section>
					<h3>Removing items</h3>
					<p>The <code>pop()</code> method removes the last item from the array and returns it</p>
<pre><code class="javascript">var classes = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];

console.log(classes);

var removed = classes.pop();

console.log(classes);
console.log(removed);</code></pre>
				</section>

				<section>
					<h3>Array review</h3>
<pre><code class="javascript">var classes = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];

var i = 0;

console.log(classes[i]); // What will this display?

console.log(classes[1]; // What will this display?

console.log(classes.pop()); // What will this display?

console.log(classes.length); // what will this display?
</code></pre>
				</section>

				<section>
					<h3>Iterating over arrays</h3>
<pre><code class="javascript">var classes = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];

for(var i = 0; i &lt; classes.length; i++) {
	console.log(i); // What will this display?
}
</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Starting with this array:</p>
<pre><code class="javascript">var noisesArray = ["quack", "sneeze", "boom"];</code></pre>
					<p>Output "<code>quack! sneeze! boom!</code>" to the console.</p>
				</section>

				<section>
					<h3>The <code>join()</code> method of arrays</h3>
					<p>Converts an array to a string.</p>
					<p>Takes a single argument - the string that should separate the individual items.</p>
				</section>

				<section>
					<h3><code>array.join()</code></h3>
<pre><code class="javascript">var classes = ['HTML 101', 'HTML 201', 'JS 101', 'JS 201'];

var classes1 = classes.join();
var classes2 = classes.join(', ');
var classes3 = classes.join(' + ');
var classes4 = classes.join('');</code></pre>
				</section>

				<section>
					<h3>Let's Develop It! (again)</h3>
					<p>Starting with this array:</p>
<pre><code class="javascript">var noisesArray = ["quack", "sneeze", "boom"];</code></pre>
					<p>Output "<code>quack! sneeze! boom!</code>" to the console.</p>
				</section>

				<section>
					<h3>The <code>filter()</code> method of arrays</h3>
<pre><code class="javascript">var numbers = [12, 5, 8, 44, 53, 130, 44, 4];

function isBigEnough(value) {
	return value >= 10;
}

var bigNumbers = numbers.filter(isBigEnough);</code></pre>
					<p>The <code>filter()</code> method creates a new array with all elements that pass the test implemented by the provided function.</p>
				</section>

				<section>
					<h3><code>filter()</code></h3>
					<p>The <code>filter()</code> method requires one argument - a callback function that returns a Boolean</p>
					<p>If the function returns true, the item is added to the new array.</p>
<pre><code class="javascript">var numbers = [12, 5, 8, 44, 53, 130, 44, 4];

function isBigEnough(value) {
	return value >= 10;
}

var bigNumbers = numbers.filter(isBigEnough);</code></pre>
				<p>The <code>filter()</code> callback function can take up to three arguments. They are: <code>element</code>, <code>index</code>, and <code>array</code></p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Given this array:</p>
<pre><code class="javascript">var cats = [
	{ name: "Maru", status: "hungry" },
	{ name: "Hana", status: "playful" },
	{ name: "Lil Bub", status: "sleepy" },
	{ name: "Grumpy Cat", status: "hungry" }
];</code></pre>
					<p>Filter the array to create a new array of just the cats who are hungry.</p>
				</section>

				<section>
					<h3>The <code>map()</code> method of arrays</h3>
					<p>The <code>map()</code> method creates a new array with the results of calling a function on each item in the array.</p>
				</section>

				<section>
					<h3><code>map()</code></h3>
					<p>The <code>map()</code> method requires one argument - a callback function that takes an item from the current array and returns an item that will be included in the new array.</p>
<pre><code class="javascript">var numbers = [57, 12, 13, 5, 143, 8, 17, 43];

var numbersPlusFive = numbers.map(function(num){
	return num + 5;
});

console.log(numbers);
console.log(numbersPlusFive);</code></pre>
					<p>The <code>map()</code> callback function can take up to three arguments. They are: <code>element</code>, <code>index</code>, and <code>array</code></p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Given this array:</p>
<pre><code class="javascript">var cats = [
	{ name: "Maru", status: "hungry" },
	{ name: "Hana", status: "playful" },
	{ name: "Lil Bub", status: "sleepy" },
	{ name: "Grumpy Cat", status: "hungry" }
];</code></pre>
					<p>Use the <code>map()</code> method to create a new array of strings representing the cats names. Like this:</p>
<pre><code class="javascript">var catNames = ["Maru", "Hana", "Lil Bub", "Grumpy Cat"];</code></pre>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions about <code>join()</code>, <code>filter()</code>, or <code>map()</code> before we move on?</p>
				</section>

				<!-- Objects -->
				<section>
					<h3>Objects Review</h3>
<pre><code class="javascript">var ollieTheCat = {
	furColor: 'gray',
	age: 1,
	personality: 'wild',
	likes: ['catnip', 'food', 'naps', 'cuddles', 'attention'],
	adopted: {
		month: 'february',
		day: '11',
		year: '2015'
	}
};</code></pre>
					<ul>
						<li class="fragment">How many keys are in the object?</li>
						<li class="fragment">What are the key names?</li>
						<li class="fragment">What are the values?</li>
					</ul>
				</section>

				<section>
					<h3>Creating objects</h3>
					<p>So far, we've learned how to create an object by doing this:</p>
<pre><code class="javascript">var ollieTheCat = {};
ollieTheCat.furColor = 'gray';
ollieTheCat.age = 1;</code></pre>
					<p>Or by doing this:</p>
<pre><code class="javascript">var ollieTheCat = {
	furColor: 'gray',
	age: 1
};</code></pre>
					<p>These are called <span class="blue">object literals</span> - a pair of curly braces with 0 or more property/value pairs.</p>
				</section>

				<section>
					<h3>The <code>new</code> keyword</h3>
					<p>We can also create new objects by using the <code>new</code> keyword, like this:</p>
<pre><code class="javascript">var ollieTheCat = new Object();
ollieTheCat.furColor = 'gray';
ollieTheCat.age = 1;</code></pre>
				</section>

				<section>
					<h3>Assigning properties</h3>
					<p>We can assign properties inside an object literal:</p>
<pre><code class="javascript">var ollieTheCat = {
	furColor: 'gray'
};</code></pre>
					<p>or by using dot notation:</p>
<pre><code class="javascript">var ollieTheCat = {};
ollieTheCat.furColor = 'gray';</code></pre>
					<p>or by using bracket notation:</p>
<pre><code class="javascript">var OllieTheCat = {};
ollieTheCat['furColor'] = 'gray';</code></pre>
				</section>

				<section>
					<h3>Accessing properties</h3>
					<p>We can access properties with dot notation:</p>
<pre><code class="javascript">var furVariable = ollieTheCat.furColor;</code></pre>
					<p>...or we can use bracket notation:</p>
<pre><code class="javascript">var furVariable = ollieTheCat['furColor'];</code></pre>
				</section>

				<section>
					<h3>Changing properties</h3>
					<p>Given an object:</p>
<pre><code class="javascript">var ollieTheCat = {
	furColor: 'gray',
	age: 1
};</code></pre>
					<p>We can change the value of a property with dot notation:</p>
<pre><code class="javascript">ollieTheCat.furColor = 'hot pink';</code></pre>
					<p>...or we can change the value with bracket notation:</p>
<pre><code class="javascript">ollieTheCat['furColor'] = 'hot pink';</code></pre>
				</section>

				<section>
					<h3>Variables</h3>
					<p>We can also use variables to store references to property names</p>
<pre><code class="javascript">var ollieTheCat = {
	furColor: 'gray'
};

var keyVariable = 'furColor';

console.log(ollieTheCat[keyVariable]);</code></pre>
					<p>Note that you can only use variables with bracket notation.</p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Create an animal object, and define these properties on it:</p>
					<ul>
						<li><code>name</code> - a string</li>
						<li><code>description</code> - a string</li>
						<li><code>noises</code> - an array of strings</li>
						<li><code>3 fav foods</code> - an array of strings</li>
					</ul>
				</section>

				<section>
					<h3>Arrays of Objects</h3>
<pre><code class="javascript">var myCats = [
	{ name: 'Ollie', age: 1, furColor: 'gray' },
	{ name: 'Mabel', age: 6, furColor: 'gray' }
];</code></pre>
					<p>What would be the result?</p>
<pre><code class="javascript">console.log(myCats[0].name);
console.log(myCats[1]furColor);
console.log(myCats[1]["Fur Color"]);</code></pre>
				</section>

				<section>
					<h3>Iterating over properties of objects</h3>
<pre><code class="javascript">var zoo = {
	birds: 3,
	bears: 5,
	cats: 12
};

for(var key in zoo) {
	console.log(zoo[key] + ' ' + key);
}</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p><a href="files/exercise-arrayofobjects.html" target="_new">Exercise instructions</a></p>
				</section>

				<section>
					<h3>Nested Objects</h3>
					<img src="img/nesting.png" height="359" width="705" alt="" style="max-height:300px;width:auto;">
<pre><code class="javascript">var doll = {
	size: 'large',
	innerDoll: { size: 'medium'}
};

doll.innerDoll.innerDoll = {size: 'small'};

console.log(doll);</code></pre>
				</section>

				<section>
					<h2>Let's Develop It!</h2>
					<p>Start with your array of animals from the previous exercise.</p>
					<p>Add an <code>outfit</code> property to each animal, which contains an object that describes different parts of their outfit, for example, <code>shirt: "blue"</code>.</p>
					<p>Log out the outfit of each animal to make sure it worked.</p>
					<p><strong>Bonus:</strong> Modify your loop from the last exercise to include the animal's outfit in the output, e.g. "Daffy Duck is wearing blue pants and a white shirt."</p>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions on objects before we move on?</p>
				</section>

				<!-- Functions -->
				<section>
					<h3>Functions</h3>
<pre><code class="javascript">function add(a, b) {
	return a + b;
};

add(5, 4);</code></pre>
					<p>Review</p>
					<ul>
						<li class="fragment">Declaring and defining</li>
						<li class="fragment">Arguments or parameters</li>
						<li class="fragment">Function name</li>
						<li class="fragment">Function body</li>
						<li class="fragment">Invocation</li>
					</ul>
				</section>

				<section>
					<h3>Function Declaration</h3>
<pre><code class="javascript">function nameImprover(name, adj) {
	return 'Admiral ' + name + ' Mc' + adj + 'pants';
}

nameImprover('Natalie', 'Sparkly');</code></pre>
					<ul>
						<li>Defines a named function</li>
						<li>Occur as standalone constructs</li>
						<li>Cannot be nested in non-function blocks</li>
					</ul>
				</section>

				<section>
					<h3>Function Expression</h3>
<pre><code class="javascript">var nameImprover = function(name, adj) {
	return 'Admiral ' + name + ' Mc' + adj + 'pants';
}

nameImprover('Natalie', 'Sparkly');</code></pre>
					<ul>
						<li>Defines a function as part of a larger expression syntax (usually a variable)</li>
						<li>Functions can be named or anonymous
							<ul>
								<li>If named, the function name is not available outside of its own scope</li>
							</ul>
						</li>
						<li>Cannot start with <code>function</code></li>
					</ul>
				</section>

				<section>
					<h3>Named Function Expression (NFE)</h3>
<pre><code class="javascript">var nameImprover = function huzzah(name, adj) {
	return 'Admiral ' + name + ' Mc' + adj + 'pants';
};</code></pre>
				</section>

				<section>
					<h3>Hoisting</h3>
					<p>Let's say you have a function defined with a function declaration, and you try to call it in your code <em>before</em> it's defined in the code:</p>
<pre><code class="javascript">saySomething('hello');

function saySomething(text) {
	console.log(text);
}</code></pre>
					<p>It works! The function gets <span class="blue">hoisted</span>, or moved to the top of its scope.</p>
					<p>This is both good and bad. Good because it keeps our code from throwing errors. Bad because it allows us to develop bad habits in our code.</p>
				</section>

				<section>
					<h3>Declaration vs Expression</h3>
					<p>Generally, best practices favor using expressions over declarations for defining functions.</p>
					<ul>
						<li>Expressions help us to enforce good coding habits.</li>
						<li>Plus, you can use expressions in places in your code where you can't use declarations - like inside an <code>if</code> statement.</li>
					</ul>
				</section>

				<section>
					<h3>Immediately-Invoked Function Expression</h3>
					<p>We can also use a function expression to create a function that is invoked immediately - an IIFE.</p>
<pre><code class="javascript">(function sayHello() {
	alert("hello!");
})();</code></pre>
					<p>It starts with a <code>(</code> not with <code>function</code>.</p>
				</section>

				<section>
					<h3>Arguments and IIFEs</h3>
					<p>We can use the parentheses to pass arguments to an IIFE:</p>
<pre><code class="javascript">(function sayHello(name) {
	alert("hello, " + name + "!");
})('Natalie');</code></pre>
				</section>

				<section>
					<h3>Returning values from functions</h3>
<pre><code class="javascript">var nameImprover = function(name, adj) {
	return 'Admiral ' + name + ' Mc' + adj + 'pants';
};</code></pre>
<pre><code class="javascript">var nameLogger = function(name, adj) {
	var newName = 'Admiral ' + name + ' Mc' + adj + 'pants';
	console.log(newName);
};</code></pre>
				</section>

				<section>
					<h3>Function Arguments</h3>
					<p>Inside a function, we can use the <code>arguments</code> keyword to fetch an array of all the arguments passed to a function.</p>
<pre><code class="javascript">var addTwo = function(a, b) {
	console.log(arguments); // logs [3,10]
	return a + b;
};

console.log(addTwo(3, 10));</code></pre>
				</section>

				<section>
					<h3><code>arguments</code></h3>
<pre><code class="javascript">var addMany = function() {
	console.log(arguments);
	var sum = 0;
	for (var i=0; i < arguments.length; i++) {
		sum += arguments[i];
	}
	return sum;
};

console.log(addMany(3, 10, 57, 24));
console.log(addMany(3, 10, 57, 24, 200, 300));</code></pre>
				</section>

				<section>
					<h3>Setting default values for arguments</h3>
<pre><code class="javascript">var nameLogger = function(name, adj) {
	if(adj === undefined) adj = "Fancy";
	var newName = 'Admiral ' + name + ' Mc' + adj + 'pants';
	console.log(newName);
};
</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p><a href="files/exercise-functionobject.html" target="_new">Exercise instructions</a></p>
				</section>

				<section>
					<h3><code>this</code></h3>
					<p>Each time we create a function, JavaScript creates a keyword called <code>this</code>.</p>
					<p>We use <code>this</code> similarly to a variable, but we can't change the value.</p>
					<p>The keyword <code>this</code> refers to the object inside which the function is created.</p>
					<p class="fragment">Huh?</p>
					<p class="fragment">Let's look at some examples.</p>
				</section>

				<section>
					<h3><code>this</code> inside methods of objects</h3>
<pre><code class="javascript">var natalie = {
	living: true,
	age: 42,
	getAge: function(){
		return this.age; //this refers to natalie - the object that contains this function
	}
};

console.log(natalie.getAge());</code></pre>
				</section>

				<section>
					<h3><code>this</code> inside callback functions</h3>
<pre><code class="xml"><button id="myBtn">A button!</button></code></pre>
<pre><code class="javascript">var btn = document.getElementById('myBtn');

btn.onclick = function(){
	var text = this.innerHTML;

	console.log(text);
};</code></pre>
				</section>

				<section>
					<h3>But wait...what's the object here?</h3>
<pre><code class="javascript">function trySomething(){
	console.log(this);
}

trySomething();</code></pre>
				</section>

				<section>
					<h3>The <code>window</code> object</h3>
					<p>A <code>window</code> object is created in the browser as soon as the JavaScript interpreter starts.</p>
					<p>All globally-scoped functions and variables are actually properties and methods of the <code>window()</code> object.</p>
				</section>

				<section>
					<h3>The <code>window</code> object</h3>
<pre><code class="javascript">var num = 7;
var name = "Natalie";

console.log(window.num);
console.log(window.name);

function sayHello() {
	console.log("Hello there!");
}

window.sayHello();</code></pre>
				</section>

				<section>
					<h3>Functions are objects</h3>
					<p>Don't forget! Functions in JavaScript are objects.</p>
					<p>They have properties and methods just like any other object.</p>
					<p>Let's take a look at a few methods.</p>
				</section>

				<section>
					<h3><code>bind()</code></h3>
					<p>Use the <code>bind()</code> method to explicity set the value of <code>this</code> without invoking the function immediately.</p>
<pre><code class="javascript">var cat = {
	name: 'Ollie',
	age: 1,
	callCat: function() {
		console.log('Come here, ' + this.name);
	}
};

var btn = document.getElementById('myBtn');

btn.addEventListener('click', cat.callCat.bind(cat));</code></pre>
				</section>

				<section>
					<h3><code>call()</code></h3>
					<p>Invokes the function, allows you to explicity set the value of <code>this</code> and pass in arguments one by one</p>
<pre><code class="javascript">var cat1 = {name: 'Mabel', age: 6 };
var cat2 = {name: 'Ollie', age: 1 };

function feedCat(food) {
	console.log('Feeding some ' + food + ' to ' + this.name);
}

feedCat.call(cat1, 'salmon');
feedCat.call(cat2, 'tuna');</code></pre>
				</section>

				<section>
					<h3><code>apply()</code></h3>
					<p>Invokes the function, allows you to explicity set the value of <code>this</code> and pass in an array of arguments.</p>
<pre><code class="javascript">var cat1 = {name: 'Mabel', age: 6 };
var cat2 = {name: 'Ollie', age: 1 };

function feedCat(food) {
	console.log('Feeding some ' + food + ' to ' + this.name);
}

feedCat.apply(cat1, ['salmon']);
feedCat.apply(cat2, ['tuna']);</code></pre>
				</section>

				<section>
					<h3>Closure</h3>
					<p>A closure is an inner function that has access to the outer function's variables.</p>
<pre><code class="javascript">function showRelationship(personName, catName) {
	var intro = "Please meet ";
	function makeSentence() {
		return intro + catName + ' and his human, ' + personName;
	}
	return makeSentence();
}
console.log(showRelationship('Natalie', 'Ollie'));</code></pre>
					<p>A closure has access to three scopes: its own scope, the enclosing function scope, and the global scope.</p>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions about functions or closures before we move on?</p>
				</section>

				<!-- Advanced DOM -->
				<section>
					<h3>The DOM: Sample HTML</h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;Test Page&lt;/title&gt;
	&lt;style&gt;
		h1 {
			color: red;
		}
	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;My Page&lt;/h1&gt;
	&lt;p&gt;Hello World!&lt;/p&gt;
	&lt;img src="http://placekitten.com/200/300" alt="cat"/&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
				</section>

				<section>
					<h3>The DOM: Sample Model</h3>
					<img src="img/dom-tree.png" alt="Simple DOM Tree"/>
				</section>

				<section>
					<h3>DOM</h3>
					<ul>
						<li>The DOM is a data structure called a <span class="blue">tree</span></li>
						<li>Each point of data is called a <span class="blue">node</span></li>
						<li>Each <span class="blue">node</span> can have a <span class="blue">parent</span>, <span class="blue">child</span>, and/or <span class="blue">sibling</span> nodes</li>
						<li>The DOM is accessed by a global variable (object) called <code class="blue">document</code></li>
						<li>We can also use dot notation to access methods and properties</li>
					</ul>
				</section>

				<section>
					<h3>Identify</h3>
					<img src="img/dom-tree.png" alt="Simple DOM Tree"/>
					<ul>
						<li>Parent/child</li>
						<li>Siblings</li>
					</ul>
				</section>

				<section>
					<h3>How JavaScript sees the DOM</h3>
<pre><code class="javascript">document = {
	head: {
		children: [ ... ] // contains all child nodes
	},
	body: {
		children: [ ... ] // contains all child nodes
		hasChildNodes: function() {
			//returns true or false
		}
	},
	getElementById: function(arg) {
		//returns matching node list
	}
	...
}</code></pre>
					<p>Note: This is not complete! But gives an idea...</p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>In the brower console, try these...</p>
<pre><code class="javascript">document.body</code></pre>
<pre><code class="javascript">document.body.children</code></pre>
<pre><code class="javascript">document.querySelectorAll('p');</code></pre>
					<p>&nbsp;</p>
					<p>What other properties and methods do we know?</p>
				</section>

				<section>
					<h3>Selecting an array of nodes</h3>
					<p>By CSS selector:</p>
<pre><code class="javascript">document.querySelectorAll('section h2');</code></pre>
					<p>By tag name:</p>
<pre><code class="javascript">document.getElementsByTagName('div');</code></pre>
					<p>By class name:</p>
<pre><code class="javascript">document.getElementsByClassName('upper');</code></pre>
				</section>

				<section>
					<h3>Selecting a single node</h3>
					<p>By ID:</p>
<pre><code class="javascript">document.getElementById('kittenPic');</code></pre>
					<p>By CSS selector:</p>
<pre><code class="javascript">document.querySelectorAll('section h2')[0];</code></pre>
<pre><code class="javascript">document.querySelector('section h2');</code></pre>
					<p>By tag name:</p>
<pre><code class="javascript">document.getElementsByTagName('div')[2];</code></pre>
					<p>By class name:</p>
<pre><code class="javascript">document.getElementsByClassName('upper')[1];</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Pair up with a buddy</p>
					<p>Open <code>gdila.org</code> in your browser, then open the console.</p>
					<p>One person will select a couple different elements on the page, and the other person has to use document methods to select them. You'll know you've got the right one when you hover over it and it highlights on the page (I'll demonstrate).</p>
					<p>Take turns.</p>
				</section>

				<section>
					<h3>Creating a new node</h3>
					<p>Three step-process:</p>
					<ol>
						<li>
							Create and store in a variable
<pre><code class="javascript">var myNewElement = document.createElement('div');</code></pre>
						</li>
						<li>
							Edit the node
<pre><code class="javascript">myNewElement.innerHTML = 'I am the html inside of a <em>brand new</em> div tag!';
myNewElement.className = 'new';</code></pre>
						</li>
						<li>
							Insert the node
<pre><code class="javascript">document.body.appendChild(myNewElement);
</code></pre>
						</li>
					</ol>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Open the browser console. Create a new image. Give it an <code>src</code> attribute. Append it to the page.</p>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Any questions on selecting or creating DOM nodes?</p>
				</section>

				<section>
					<h3>Events</h3>
					<dl class="align-left">
						<dt>Event</dt>
						<dd>Something that happens</dd>
						<dt>Callback</dt>
						<dd>Function that executes after the event happens</dd>
						<dt>Event Listener</dt>
						<dd>A method that binds a callback to an event</dd>
					</dl>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Add this button to your HTML page:</p>
<pre><code class="javascript">&lt;button id="testButton"&gt;Click me!&lt;/button&gt;</code></pre>
					<p>&nbsp;</p>
					<p>Now add an event listener to the button that will log a message to the console when the button is clicked.</p>
					<p><strong>Bonus:</strong> If you finish early, try updating the callback so it logs the number of times the button has been clicked to the console.</p>
				</section>

				<section>
					<h3>Event Listeners</h3>
					<p>So far, we have only used specific event handler methods as event listeners.</p>
					<p>These specific event handlers have a limitation: you can only assign one callback per event.</p>
<pre><code class="javascript">var btn = document.getElementById('testButton');
btn.onclick = function() { console.log('did stuff #1'); };
btn.onclick = function() { console.log('did stuff #2'); };</code></pre>
					<p>If you click the button, you'll see that only <code>did stuff #2</code> is logged to the console. We're assigning properties to an object, and the second one simply overwrites the first.</p>
				</section>

				<section>
					<h3>The <code>addEventListener()</code> method</h3>
					<p>If we want to get fancy (or just build more stable and flexible code), we can use the <code>addEventListener()</code> method instead.</p>
<pre><code class="javascript">element.addEventListener(event, callback);</code></pre>
				</section>

				<section>
					<h3><code>addEventListener()</code> with an anonymous function</h3>
<pre><code class="javascript">var myButton = document.getElementById('testButton');

myButton.addEventListener('click', function() {
	console.log('button was clicked!');
});</code></pre>
					<p>&nbsp;</p>
					<p>This works, but we can't remove this callback later on because we don't have a way to call it - it's anonymous and has no name.</p>
				</section>

				<section>
					<h3><code>addEventListener()</code> with a named function</h3>
<pre><code class="javascript">var myButton = document.getElementById('testButton');

//store and define the function
var myCallback = function() {
	console.log('button clicked!');
};

myButton.addEventListener('click', myCallback);</code></pre>
					<p>&nbsp;</p>
					<p>Now, we can remove that event listener later on:</p>
<pre><code class="javascript">myButton.removeEventListener('click', myCallback)
</code></pre>
				</section>

				<section>
					<h3>What about arguments?</h3>
					<p>Arguments get passed to the callback:</p>
<pre><code class="javascript">var myLink = document.getElementById('testLink');

//store and define the function
var myCallback = function(e) {
	e.preventDefault();
	console.log('Not going there!');
};

//no argument needed for binding the event
myLink.addEventListener('click', myCallback);</code></pre>
				</section>

				<section>
					<h3>Event Bubbling</h3>
					<p>The DOM is a series of objects, nested inside one another: a paragraph inside a div inside the body inside the document, for example.</p>
					<p>When an event is triggered on a nested element, it's also triggered on the parent(s), all the way up to the <code>document</code> object.</p>
					<p class="fragment">Really?</p>
				</section>

				<section>
					<h3>Event Bubbling</h3>
<pre><code class="xml"><div id="parent">
	<p>This is a paragraph</p>
	<button>I'm a button!</button>
</div></code></pre>
<pre><code class="javascript">var div = document.getElementById('parent');

var showMessage = function(e) {
	console.log('The div was clicked!');
}

div.addEventListener('click', showMessage);</code></pre>
					<p>The order is called a bubbling order, because an event bubbles from the innermost element up through parents, like a bubble of air in the water.</p>
				</section>

				<section>
					<h3>Event Target</h3>
					<p>The deepest element that triggered the event is called the <code>target</code>. And <code>this</code> is the element the event has bubbled to - the one that triggers the event handler.</p>
					<p>The <code>target</code> is stored as a property of the event object.</p>
<pre><code class="javascript">var div = document.getElementById('parent');

var showMessage = function(e) {
	console.log('You clicked on ' + e.target.nodeName);
	console.log('The event was handled on ' + this.nodeName);
}

div.addEventListener('click', showMessage);</code></pre>
				</section>

				<section>
					<h3><code>stopPropagation()</code></h3>
					<p>You can stop an event from bubbling up the DOM with the <code>stopPropagation</code> method.</p>
<pre><code class="javascript">var div = document.getElementById('parent');
var btn = document.querySelector('#parent button');

var showMessage = function(e) {
	console.log('You clicked on ' + e.target.nodeName);
	console.log('The event was handled on ' + this.nodeName);
}

var showAnotherMessage = function(e) {
	e.stopPropagation();
	console.log('The ' + e.target.nodeName + ' was clicked and the event didn\'t bubble.');
};

div.addEventListener('click', showMessage);
btn.addEventListener('click', showAnotherMessage);</code></pre>
				</section>

				<section>
					<h3>Event Delegation</h3>
					<p>We can take advantage of event bubbling in our code.</p>
					<p>Let's start with this HTML:</p>
<pre><code class="xml"><ul id="awesomeCats">
	<li><strong>Maru</strong> - he likes boxes!</li>
	<li><strong>Hana</strong> - she love Maru</li>
	<li><strong>Lil Bub</strong> - she's a trooper</li>
	<li><strong>Grumpy Cat</strong> - she's the grumpiest</li>
</ul>
</code></pre>
					<p>We want to toggle a highlight on each list item when it's clicked.</p>
				</section>

				<section>
					<h3>Event Delegation</h3>
					<p>We could add an event listener to each list item...or we could just listen for an event on the list:</p>
<pre><code class="javascript">var list = document.getElementById('awesomeCats');

var listClicking = function(e) {
	var el = event.target;
	while (el != this) {
		if (el && el.nodeName == 'LI') {
			toggleHighlight(el);
		}
		el = el.parentNode;
	}
};

var toggleHighlight = function(el) {
	var color = el.style.backgroundColor;
	if (color) { el.style.backgroundColor = ''; }
	else { el.style.backgroundColor = 'pink'; }
};

list.addEventListener('click', listClicking);</code></pre>
				</section>

				<section>
					<h3>Advantages of using event delegation</h3>
					<p>Event listeners are only added to elements when the page is first loaded.</p>
					<p>If we change the page later - for example, we add more items to the list with ajax - those new items won't have event listeners. We would have to re-add event listeners to any new items created on the page.</p>
					<p>Or we can use event delegation instead - the container element stays on the page no matter what, and we can listen for events there.</p>
				</section>

				<section>
					<h3>Things to be aware of</h3>
					<p>Not all events bubble - <a href="https://en.wikipedia.org/wiki/DOM_events#Events">here's a nice list of events</a> that shows which ones bubble and which do not.</p>
					<p>If you're not careful, you can put a lot of load on the browser - be sure to think about how often an event might be fired vs how often you'd want to trigger a callback function in response.</p>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions on event bubbling and delgation?</p>
				</section>

				<section>
					<h3>Let's Develop It</h3>
					<p>Given this HTML:</p>
<pre><code class="xml"><div id="content">
	<p>You can learn about about <a href="https://en.wikipedia.org/wiki/Lion">lions</a>, <a href="https://en.wikipedia.org/wiki/Tiger">tigers</a>, or <a href="https://en.wikipedia.org/wiki/Bear">bears</a>.</p>
	<p>Or you could just relax and <a href="https://www.youtube.com/watch?v=QRZ8U34D-Jk">watch a video.</a></p>
</div></code></pre>
					<p>Use event delegation to display an alert each time a user clicks a link that asks them if they're sure.</p>
				</section>

				<!-- OOP with JavaScript -->
				<section>
					<h3>Object-Oriented Programming (OOP)</h3>
					<p>Let's use a book as an example of an object.</p>
					<div style="width:50%;margin-left:auto;margin-right:auto;border:5px solid #333;padding:0.5em;">
						<h4>Book</h4>
						<p>Properties:</p>
						<ul>
							<li>title</li>
							<li>author</li>
							<li>pages</li>
						</ul>
						<p>Methods:</p>
						<ul>
							<li>read()</li>
							<li>buy()</li>
						</ul>
					</div>
				</section>

				<section>
					<h3>Object Instances</h3>
					<p>There can be many <code class='blue'>instances</code> of objects:</p>
					<div style="overflow:hidden;">
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>The Giver</h4>
								<p>by Lois Lowry</p>
								<p>179 pages</p>
							</div>
						</div>
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>Fox in Sox</h4>
								<p>by Dr. Seuss</p>
								<p>62 pages</p>
							</div>
						</div>
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>A Wrinkle in Time</h4>
								<p>by Madeline L'Engle</p>
								<p>211 pages</p>
							</div>
						</div>
					</div>
					<p>Each is an <span class="blue">instance</span> of the <code>book</code> object.</p>
				</section>

				<section>
					<h3>Defining an object in JavaScript</h3>
					<p>First, define a constructor function with the object's properties</p>
<pre><code class="javascript">function Book(title, author, numPages) {
	this.title = title;
	this.author = author;
	this.numPages = numPages;
	this.currentPage = 0;
}</code></pre>
						<p>Define methods for the object</p>
<pre><code class="javascript">Book.prototype.read = function() {
	this.currentPage = this.numPages;
	console.log("You read " + this.numPages + " pages!");
}</code></pre>
				</section>

				<section>
					<h3>Instantiating an object</h3>
					<p>Then, <span class="blue">instantiate</span> a new object</p>
<pre><code class="javascript">var book = new Book("Robot Dreams", "Isaac Asimov", 320);

book.read(); // Will log "You read 320 pages!" to the console</code></pre>
				</section>

				<section>
					<h3>What does <code>new</code> do?</h3>
					<ol>
						<li>Creates a new <code>Object</code></li>
						<li>Creates and binds a new <code>this</code> to that object</li>
						<li>Sets the new Object's <code>prototype</code> property to be the constructor function's <code>prototype</code> object</li>
						<li>Executes the constructor function</li>
						<li>Returns the newly created object</li>
					</ol>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Create a <code>Video</code> object. The <code>Video</code> object should have the following properties and methods:</p>
					<ul>
						<li><code>title</code> - a string</li>
						<li><code>uploader</code> - a string, the person who uploaded the video</li>
						<li><code>seconds</code> - a number, the duration of the video</li>
						<li><code>watch()</code> - a method that logs a string to the console, e.g. "You watched all 76 seconds of Maru in a box!"</li>
					</ul>
					<p>&nbsp;</p>
					<p>Then instantiate a new <code>Video</code> object and call the <code>watch()</code> method on it.</p>
				</section>

				<section>
					<h3>Object-oriented programming</h3>
					<p>Objects can inherit properties and methods from other objects. And objects can implement parent methods in different ways.</p>
					<div style="overflow:hidden;">
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>Book</h4>
								<ul>
									<li><code>title</code></li>
									<li><code>author</code></li>
									<li><code>pages</code></li>
									<li><code>read()</code></li>
									<li><code>buy()</code></li>
								</ul>
							</div>
						</div>
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>Ebook</h4>
								<p>Inherits from book, but also has:</p>
								<ul>
									<li><code>filesize</code></li>
									<li><code>download()</code></li>
								</ul>
							</div>
						</div>
						<div style="width:33%;float:left;">
							<div style="margin:0 0.5em;padding:0.5em;border:5px solid #333;">
								<h4>Paperback</h4>
								<p>Inherits from book, but also has:</p>
								<ul>
									<li><code>cover</code></li>
									<li><code>burn()</code></li>
								</ul>
							</div>
						</div>
					</div>
				</section>

				<section>
					<h3>Extending objects</h3>
					<p>First, define a constructor function</p>
<pre><code class="javascript">function PaperBack(title, author, numPages, cover) {
	Book.call(this, title, author, numPages);
	this.cover = cover;
}</code></pre>
					<p>Extend the Book object</p>
<pre><code class="javascript">PaperBack.prototype = Object.create(Book.prototype);</code></pre>
					<p>Define a new method on this object</p>
<pre><code class="javascript">PaperBack.prototype.burn = function() {
	console.log("Omg, you burnt all " + this.numPages + " pages");
	this.numPages = 0;
}</code></pre>
					<p>Instantiate a new object</p>
<pre><code class="javascript">var paperback = new PaperBack("1984", "George Orwell", 250, "cover.jpg");
paperback.read();
paperback.burn();</code></pre>
				</section>

				<section>
					<h3>Inheritance</h3>
					<img src="img/book-ebook.png" height="400" width="400" alt="">
					<p>All Ebooks are Books, but not all Books are Ebooks.</p>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Building on the exercise from last time, create a new object <code>MusicVideo</code> that extends <code>Video</code>. The constructor should also take in an <code>artist</code> property.</p>
					<p>Instantiate a new <code>MusicVideo</code> and call the <code>watch()</code> method on it.</p>
					<p>Add a new method to the <code>MusicVideo</code> object called <code>rockOut()</code> that logs a message to the console, e.g. "You just rocked out to Shake it Off by Taylor Swift!"</p>
				</section>

				<section>
					<h3>Clearer Constructors</h3>
					<p>By passing in a config object, we can make our code easier to read and understand:</p>
<pre><code class="javascript">function Book(config) {
	this.title = config.title;
	this.author = config.author;
	this.numPages = config.numPages;
	this.currentPage = 0;
}</code></pre>
<p>Then we pass in an object instead of a series of arguments to instantiate a new object:</p>
<pre><code class="javascript">var book = new Book({
	title: "Robot Dreams",
	author: "Isaac Asimov",
	numPages: 320
});</code></pre>
				</section>

				<section>
					<h3>Optional Arguments</h3>
					<p>Use the <code>||</code> operator to define a default value for properties.</p>
<pre><code class="javascript">function Book(config) {
	this.title = config.title || "Untitled";
	this.author = config.author || "Unknown";
	this.numPages = config.numPages || 100;
	this.currentPage = 0;
}

var book = new Book({
	title: "Robot Dreams",
	numPages: 320
});</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Building on the exercise from last time, comment out the <code>MusicVideo</code> code.</p>
					<p>Change the <code>Video</code> constructor function to accept an object literal instead of multiple arguments.</p>
					<p>Define a default value for every property.</p>
					<p>Finally, instantiate a new <code>Video</code> and call the <code>watch()</code> method on it.</p>
				</section>

				<section>
					<h3>"Object-oriented" JavaScript</h3>
					<p>JavaScript is not a strict OO language like Java, but it can still be used in an object-oriented way.</p>
					<p>Future versions of JavaScript are already in the works with more OO features built into the language.</p>
				</section>

				<!-- AJAX and JSON -->
				<section>
					<h3>JSON</h3>
					<ul>
						<li class="fragment">JSON = JavaScript Object Notation</li>
						<li class="fragment">A set of key/value pairs</li>
						<li class="fragment">Keys must be stored in quotes</li>
						<li class="fragment">Values can be Number, String, Boolean, Array, Object or null</li>
						<li class="fragment">Resembles objects, hash tables, or structs of programming languages</li>
						<li class="fragment">Can be validated at <a href="http://jsonlint.com/">JSONlint.com</a></li>
					</ul>
				</section>

				<section>
					<h3>Example JSON</h3>
<pre><code class="javascript">{
	"firstName": "Jane",
	"lastName": "Smith",
	"address": {
		"streetAddress": "425 2nd Street",
		"city": "San Francisco",
		"state": "CA",
		"postalCode": 94107
	},
	"phoneNumbers": [
		"212 732-1234",
		"646 123-4567" ]
}</code></pre>
				</section>

				<section>
					<h3>Moving JSON to the DOM</h3>
					<p>Start by storing JSON in a variable:</p>
<pre><code class="javascript">var myProfile = {
	"firstName": "Natalie",
	"lastName": "MacLees",
	"cats": ["Mabel", "Ollie"]};</code></pre>
					<p>Then, you can access the data stored inside and use it while creating new nodes:</p>
<pre><code class="javascript">var p = document.createElement('p');
p.innerHTML = 'My name is ' + myProfile.firstName + ' ' + myProfile.lastName + '. ';
p.innerHTML += 'My cats are ' + myProfile.cats.join(', ') + '.';</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p><a href="files/exercise-videoplayer.html" target="_new">Exercise instructions</a></p>
				</section>

				<section>
					<h3>Ajax</h3>
					<p>Asynchronous JavaScript And "XML"</p>
					<img src="img/ajax.png" height="400" width="600" alt="">
				</section>

				<section>
					<h3>Ajax in the wild</h3>
					<img src="img/wild-ajax.png" height="880" width="1136" alt="">
				</section>

				<section>
					<h3>The <code>XMLHttpRequest</code> object</h3>
					<ul>
						<li>A native JavaScript object that can communicate asynchronously between the client and the server.</li>
						<li>To use it, we create a new instance of the object:
<pre><code class="javascript">var request = new XMLHttpRequest();</code></pre>
						</li>
						<li>...and then use the properties and methods of that object to make an ajax call</li>
					</ul>
				</section>

				<section>
					<h3>Getting ready to communicate</h3>
					<p>Now that we've created an instance of the XHR object, it needs to be prepped for communition. That requires three things:</p>
					<ol>
						<li>The <code>readystatechange</code> event handler</li>
						<li>The <code>open()</code> method</li>
						<li>The <code>send()</code> method</li>
					</ol>
				</section>

				<section>
					<h3><code>readystatechange</code></h3>
					<ul>
						<li>During an ajax operation, the server sends updates to the client about the current status of the communication by updating a property of the XHR object called <code>readyState</code>.</li>
						<li class="fragment">Each time the <code>readyState</code> property is changed, the <code>readystatechange</code> event is fired.</li>
						<li class="fragment">If you add an event listener function to the <code>readystatechange</code> event, your function will execute each time the server pings the client with an update.</li>
					</ul>
				</section>

				<section>
					<h3>An <code>onreadystatechange</code> example</h3>
<pre><code class="javascript">var request = new XMLHttpRequest();

if(request) {
	request.addEventListener('readystatechange', function(){
	console.log(request.readyState);
});</code></pre>
				</section>

				<section>
					<h3>The <code>open()</code> method</h3>
					<div class="left-align">
						<p>The <code>open()</code> method takes two required arguments:</p>
						<ol>
							<li>The type of request (string)</li>
							<li>The location of the file on the server (string)</li>
						</ol>
						<p>&nbsp;</p>
						<p>And an additional optional argument:</p>
						<ol>
							<li>Whether or not the request should be asynchronous (Boolean)</li>
						</ol>
					</div>
				</section>

				<section>
					<h3>Request types: <code>GET</code> and <code>PUT</code></h3>
					<dl>
						<dt><code>GET</code></dt>
						<dd>
							<ul>
								<li>Most commonly used</li>
								<li>When you just want to retrieve a file from the server and you don't need to send any data</li>
								<li>Also capable of sending a small amount of data as a query string</li>
							</ul>
						</dd>
						<dt><code>PUT</code></dt>
						<dd>
							<ul>
								<li>Useful for sending a lot of data to the server</li>
							</ul>
						</dd>
					</dl>
					<p><small>Just FYI, there are some other request types too (<code>PUT</code>, <code>DELETE</code>, and <code>HEAD</code>, for example), but they're not a concern for ajax stuff.</small></p>
				</section>

				<section>
					<h3>Location of the file</h3>
					<ul>
						<li>A string that contains either a relative, absolute, or full path to a file on the server</li>
						<li>The file you are requesting must reside in the same domain as the JavaScript file that is making the request.</li>
					</ul>
				</section>

				<section>
					<h3>Asynchronous</h3>
					<p>Indicates whether the request should occur asynchronously or not.</p>
					<p>If <code>true</code>, the script will make the request and won't wait for the response from the server before moving on to the rest of the script.</p>
					<p>If <code>false</code>, the browser will stop processing the script until the ajax request is completed.</p>
					<p>&nbsp;</p>
					<p>Use <code>true</code>!</p>
				</section>

				<section>
					<h3>The <code>send()</code> method</h3>
					<p>Once your request is prepped by the <code>open()</code> method, it's ready to be sent!</p>
				</section>

				<section>
					<h3><code>send()</code> using <code>GET</code></h3>
<pre><code class="javascript">var request = new XMLHttpRequest();

if(request) {
	request.addEventListener('readystatechange', function(){...});
	request.open('GET', 'file.ext', true);
	request.send();
}</code></pre>
				</section>

				<section>
					<h3><code>PUT</code>: The <code>setRequestHeader()</code> method</h3>
					<p>Since we're sending data with the <code>PUT</code> type, we have an extra step. We need to use the <code>setRequestHeader</code> method of the XHR object to set the request headers.</p>
					<p>Request headers are bits of metadata that describe the request so the server understands what to expect from the data received.</p>
					<p><code>setRequestHeader()</code> takes two arguments:</p>
					<ol>
						<li>Name of the header (string)</li>
						<li>Value of the header (string)</li>
					</ol>
				</section>

				<section>
					<h3><code>setRequestHeader()</code> example</h3>
					<p>If you are sending data to the server, you need to set the value of the <code>Content-type</code> header to <code>application/x-www-form-urlencoded</code>, like this:</p>
<pre><code class="javascript">request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');</code></pre>
					<p>This tells the server to expect some data and for that data to be URL-encoded.</p>
					<p><span class="blue">URL-encoded</span> means spaces become plus signs (+) and non-alphanumeric characters need to be encoded as <a href="http://www.degraeve.com/reference/urlencoding.php">hex values</a>.</span></p>
<pre><code class="javascript">'name=Natalie+MacLees&message=JavaScript+is+awesome%21'</code></pre>
				</section>

				<section>
					<h3><code>send()</code> using <code>PUT</code></h3>
<pre><code class="javascript">var request = new XMLHttpRequest();

if(request) {
	request.addEventListener('readystatechange', function(){...});
	request.open('POST', 'file.ext', true);
	request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
	request.send('name=Natalie+MacLees&message=JavaScript+is+awesome%21');</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Some kind of exercise</p>
				</section>

				<section>
					<h3>Receiving a response</h3>
					<p>Phew! Now we've got sending a request down - let's learn how to receive a response!</p>
				</section>

				<section>
					<h3>The <code>readyState</code> property</h3>
					<p>Indicates the current state of the Ajax request. Possible values:</p>
					<ul>
						<li><code>0</code> - Uninitialized. The open method hasn't been called yet.</li>
						<li><code>1</code> - Loading. The open method has been called.</li>
						<li><code>2</code> - Loaded. The send method has been called - the request has begun</li>
						<li><code>3</code> - Interactive. The server is working on it</li>
						<li><code>4</code> - Complete. The server sent a response.</li>
					</ul>
				</section>

				<section>
					<h3><code>readyState</code> property and the <code>readyStateChange</code> event</h3>
					<p>In theory, the readyState property counts from 0 to 4 in order.</p>
					<p>In practice, what happens is a bit unpredictable.</p>
					<p>What we <em>can</em> count on is that if the value has reached <code>4</code>, the server has finished sending a response.</p>
				</section>

				<section>
					<h3>Checking the <code>readyState</code></h3>
<pre><code class="javascript">function doSomething() {
	if (request.readyState == 4) {
		//do something with the response here
	}
}</code></pre>
					<p><code>doSomething()</code> gets called every time the value of the <code>readyState</code> property changes, but our <code>if</code> statement ensures nothing will happen unless the value is <code>4</code>.</p>
				</section>

				<section>
					<h3>Status</h3>
					<p>When the server sends back a response, it always includes response headers with metadata about the response.</p>
					<p>These headers include a <span class="blue">status code</span> - a three digit number that is part of the HTTP protocol</p>
					<p>Some examples:</p>
					<ul>
						<li><code>404</code> - not found</li>
						<li><code>403</code> - forbidden</li>
						<li><code>500</code> - internal server error</li>
					</ul>
				</section>

				<section>
					<h3>200 OK</h3>
					<p>The most common status code is <code>200</code>, which means <code>OK</code>. It indicates the response was successfully sent.</p>
					<p>The XHR object has a property called <code>status</code> where the status code is stored. We can check it to make sure we got a successful response:</p>
<pre><code class="javascript">function doSomething() {
	if (request.readyState == 4) {
		if (request.status == 200) {
			//response was successful, do something
		}
	}
}</code></pre>
				</section>

				<section>
					<h3>When things don't go as planned...</h3>
					<p>We can also add an <code>else</code> statement to deal with situations where things don't go according to plan:</p>
<pre><code class="javascript">function doSomething() {
	if (request.readyState == 4) {
		if (request.status == 200) {
			//response was successful, do something
		} else {
			//something went wrong!
		}
	}
}</code></pre>
				</section>

				<section>
					<h3>The <code>responseText</code> property</h3>
					<p>The <code>responseText</code> property of the XHR object contains the data sent from the server as a string.</p>
<pre><code class="javascript">function doSomething() {
	if (request.readyState == 4) {
		if (request.status == 200) {
			console.log(request.responseText);
		}
	}
}</code></pre>
				</section>

				<section>
					<h3>But we need JSON!</h3>
					<p>The <code>responseText</code> property contains our data, but it's a string, and we need JSON. We just need to convert it to JSON like this:</p>
<pre><code class="javascript">var jsonObj = JSON.parse(request.responseText);</code></pre>
				</section>

				<section>
					<h3>Putting it all together</h3>
					<p>Let's step through fetching some information from the server with ajax and displaying it on our page.</p>
				</section>

				<section>
					<h3>First, we need to create, prep, and send our request:</h3>
<pre><code class="javascript">var request = new XMLHttpRequest();

var displayResponse = function(request){
	// we'll write some code here later
};

if (request) {
	request.onreadystatechange = function(){
		displayResponse(request);
	};
	request.open('GET', 'me.json', true);
	request.send();
}</code></pre>
				</section>

				<section>
					<h3>Next, we'll handle the response</h3>
<pre><code class="javascript">var displayResponse = function(request) {
	if (request.readyState == 4) {
		if (request.status == 200) {
			var jsonObj = JSON.parse(request.responseText);

			var p = document.createElement('p');
			p.innerHTML = 'My name is ' + jsonObj.firstName + ' ' + jsonObj.lastName + ' and I live at ' + jsonObj.address.streetAddress + ' in ' + jsonObj.address.city + '. ';
			p.innerHTML += 'My zip code is ' + jsonObj.address.postalCode + '.';

			var displayBox = document.getElementById('resultsBox');

			displayBox.appendChild(p);
		}
	}
};</code></pre>
				</section>

				<section>
					<h3>Let's Develop It!</h3>
					<p>Exercise that will require a local server.</p>
				</section>

				<section>
					<h3>Ajax</h3>
					<p>The <code>XMLHttpRequest</code> is the heart and soul of ajax. Its methods and properties drive the requests that make ajax feel so responsive.</p>
				</section>

				<section>
					<h2>Questions?</h2>
					<p>Questions about JSON or Ajax before we wrap up?</p>
				</section>

				<section>
					<h3>Survey</h3>
					<p>Survey info and links</p>
				</section>

				<section>
					<h3>Thank you!</h3>
					<p>As you keep working with JavaScript, if you have questions or get stuck, post in our <a href="http://facebook.com/groups/gdila">Facebook group</a> and we'll help you out!.</p>
				</section>

			</div>
			<footer>
				<div class="copyright">
					JavaScript 201 -- Los Angeles --
					<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/80x15.png" /></a>
				</div>
			</footer>
		</div>


		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
						Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
										{ src: 'plugin/accessibility-helper/js/accessibility-helper.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
